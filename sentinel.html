<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Industrial Sentinel // Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
      body {
        margin: 0;
        background: #000000;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect, useRef } = React;

      const Icon = ({ size = 24, className = '', children, ...props }) => (
        <svg
          width={size}
          height={size}
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          strokeWidth="1.6"
          strokeLinecap="round"
          strokeLinejoin="round"
          className={className}
          {...props}
        >
          {children}
        </svg>
      );

      const Flame = (props) => (
        <Icon {...props}>
          <path d="M12 2c-2 3-1 5-3 7-1 1-2 3-2 5a5 5 0 0 0 10 0c0-2-1-4-3-6-1-1-1-2-2-6z" />
        </Icon>
      );

      const Radio = (props) => (
        <Icon {...props}>
          <circle cx="12" cy="12" r="2" />
          <path d="M5 12a7 7 0 0 1 14 0" />
          <path d="M2 12a10 10 0 0 1 20 0" />
        </Icon>
      );

      const Database = (props) => (
        <Icon {...props}>
          <ellipse cx="12" cy="6" rx="7" ry="3" />
          <path d="M5 6v8c0 1.7 3.1 3 7 3s7-1.3 7-3V6" />
          <path d="M5 10c0 1.7 3.1 3 7 3s7-1.3 7-3" />
        </Icon>
      );

      const Terminal = (props) => (
        <Icon {...props}>
          <rect x="3" y="4" width="18" height="16" rx="2" />
          <path d="M7 9l3 3-3 3" />
          <line x1="12" y1="15" x2="17" y2="15" />
        </Icon>
      );

      const Zap = (props) => (
        <Icon {...props}>
          <path d="M13 2L3 14h7l-1 8 10-12h-7l1-8z" />
        </Icon>
      );

      const Lock = (props) => (
        <Icon {...props}>
          <rect x="4" y="11" width="16" height="9" rx="2" />
          <path d="M8 11V8a4 4 0 0 1 8 0v3" />
        </Icon>
      );

      const Unlock = (props) => (
        <Icon {...props}>
          <rect x="4" y="11" width="16" height="9" rx="2" />
          <path d="M8 11V8a4 4 0 0 1 7.5-1.5" />
        </Icon>
      );

      const ShieldAlert = (props) => (
        <Icon {...props}>
          <path d="M12 2l7 3v6c0 5-3.5 9-7 11-3.5-2-7-6-7-11V5l7-3z" />
          <line x1="12" y1="8" x2="12" y2="13" />
          <circle cx="12" cy="16" r="1" fill="currentColor" stroke="none" />
        </Icon>
      );

      const App = () => {
        const [isAlarmActive, setIsAlarmActive] = useState(false);
        const [isMuted, setIsMuted] = useState(false);
        const [isLocked, setIsLocked] = useState(false);
        const terminalEndRef = useRef(null);
        const logCounter = useRef(0);

        const [sensors, setSensors] = useState({
          gasLevel: 120,
          flameDetected: false,
          distance: 150,
          temp: 24.5,
          voltage: 5.0,
          uptime: 0
        });

        const [logs, setLogs] = useState([
          { id: 'log-init-1', time: '00:00:01', msg: 'KERNEL_INIT: BOOTING SENTINEL OS...', type: 'system' },
          { id: 'log-init-2', time: '00:00:02', msg: 'AUTH_SUCCESS: ENCRYPTED CHANNEL ESTABLISHED', type: 'success' }
        ]);

        useEffect(() => {
          if (terminalEndRef.current) {
            terminalEndRef.current.scrollIntoView({ behavior: 'smooth' });
          }
        }, [logs]);

        useEffect(() => {
          const timer = setInterval(() => {
            setSensors((prev) => {
              const newGas = Math.max(80, prev.gasLevel + (Math.random() > 0.8 ? 25 : -10));
              const newFlame = Math.random() > 0.99;

              return {
                ...prev,
                gasLevel: newGas,
                flameDetected: newFlame || (prev.flameDetected && isAlarmActive),
                distance: Math.round(Math.max(5, Math.min(450, prev.distance + (Math.random() - 0.5) * 20))),
                temp: +(prev.temp + (Math.random() - 0.5) * 0.2).toFixed(1),
                voltage: +(5.0 + (Math.random() - 0.5) * 0.1).toFixed(2),
                uptime: prev.uptime + 1
              };
            });
          }, 1000);

          return () => clearInterval(timer);
        }, [isAlarmActive]);

        useEffect(() => {
          if (sensors.flameDetected && !isAlarmActive) {
            setIsAlarmActive(true);
            addLog('CRITICAL_ERROR: THERMAL_SIGNATURE_DETECTED', 'danger');
          }
          if (sensors.gasLevel > 450 && !isAlarmActive) {
            setIsAlarmActive(true);
            addLog('TOXIC_ALERT: GAS_LEVELS_OVER_THRESHOLD', 'danger');
          }
        }, [sensors.flameDetected, sensors.gasLevel, isAlarmActive]);

        const addLog = (msg, type = 'info') => {
          logCounter.current += 1;
          const newId = `log-${Date.now()}-${logCounter.current}`;

          setLogs((prev) =>
            [
              ...prev,
              {
                id: newId,
                time: new Date().toLocaleTimeString('en-GB', { hour12: false }),
                msg: msg.toUpperCase(),
                type
              }
            ].slice(-15)
          );
        };

        const resetSystem = () => {
          setIsAlarmActive(false);
          setSensors((prev) => ({ ...prev, flameDetected: false }));
          addLog('SYSTEM_REBOOT: MANUAL_OVERRIDE_CONFIRMED', 'system');
        };

        return (
          <div className="min-h-screen bg-black text-emerald-500 font-mono selection:bg-emerald-900 selection:text-white overflow-hidden relative">
            <div className="fixed inset-0 pointer-events-none z-50 opacity-[0.03] bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.25)_50%),linear-gradient(90deg,rgba(255,0,0,0.06),rgba(0,255,0,0.02),rgba(0,0,255,0.06))] bg-[length:100%_4px,3px_100%]"></div>

            {isAlarmActive && <div className="fixed inset-0 pointer-events-none z-40 bg-red-900/20 animate-pulse"></div>}

            <header className="border-b border-emerald-900/50 p-4 flex justify-between items-center bg-black/80 backdrop-blur-sm relative overflow-hidden">
              <div className="absolute top-0 left-0 w-full h-[1px] bg-emerald-500/20 shadow-[0_0_15px_emerald]"></div>

              <div className="flex items-center gap-6">
                <div className="relative group">
                  <div
                    className={`p-1 border transition-all duration-500 bg-white ${
                      isAlarmActive ? 'border-red-500 shadow-[0_0_20px_red]' : 'border-emerald-500'
                    }`}
                  >
                    <img
                      src="public/puffin_3358132.png"
                      alt="Logo Puffin"
                      className={`w-12 h-12 object-contain transition-all duration-300 ${
                        isAlarmActive ? 'animate-bounce invert' : ''
                      }`}
                    />
                  </div>
                  <div
                    className={`absolute -bottom-2 -right-2 bg-black border px-1 text-[8px] font-black ${
                      isAlarmActive ? 'border-red-500 text-red-500' : 'border-emerald-900 text-emerald-900'
                    }`}
                  >
                    SNTL_V1
                  </div>
                </div>

                <div>
                  <h1 className="text-2xl font-black tracking-[0.2em] italic">
                    SENTINEL_DASHBOARD <span className="animate-pulse">_</span>
                  </h1>
                  <div className="flex gap-4 text-[10px] uppercase font-bold text-emerald-800">
                    <span>Host: 127.0.0.1</span>
                    <span>Node: {sensors.uptime}s</span>
                    <span>Status: {isAlarmActive ? '!! BREACHED !!' : 'SECURE'}</span>
                  </div>
                </div>
              </div>

              <div className="flex items-center gap-4">
                <div className="text-right mr-4 hidden md:block">
                  <p className="text-[10px] text-emerald-900 font-bold uppercase">Main Core Temp</p>
                  <p className="text-sm font-bold">{sensors.temp} C</p>
                </div>
                <button
                  onClick={() => setIsLocked(!isLocked)}
                  className="p-2 border border-emerald-900 hover:bg-emerald-900/20 transition-all"
                >
                  {isLocked ? <Lock size={18} /> : <Unlock size={18} />}
                </button>
                <button
                  onClick={resetSystem}
                  className={`px-6 py-2 text-xs font-black tracking-widest border-2 transition-all ${
                    isAlarmActive
                      ? 'bg-red-600 border-red-400 text-white hover:bg-red-500 animate-bounce'
                      : 'border-emerald-900 text-emerald-900 hover:border-emerald-500 hover:text-emerald-500'
                  }`}
                >
                  SYS_RECOVERY
                </button>
              </div>
            </header>

            <main className="p-4 grid grid-cols-1 lg:grid-cols-12 gap-4 h-[calc(100vh-80px)] overflow-hidden">
              <div className="lg:col-span-3 flex flex-col gap-4">
                <div
                  className={`flex-1 border-2 p-4 relative overflow-hidden flex flex-col justify-center items-center ${
                    sensors.flameDetected ? 'border-red-500 bg-red-950/20' : 'border-emerald-900/30'
                  }`}
                >
                  <div className="absolute top-2 left-2 text-[10px] font-bold opacity-40">THERMAL_DETECTOR</div>
                  <Flame size={48} className={sensors.flameDetected ? 'text-red-500 animate-pulse' : 'text-emerald-900'} />
                  <p className={`text-2xl font-black mt-2 ${sensors.flameDetected ? 'text-red-500' : 'text-emerald-900'}`}>
                    {sensors.flameDetected ? 'FIRE_BREACH' : 'STABLE'}
                  </p>
                </div>

                <div className="flex-1 border-2 border-emerald-900/30 p-4 relative">
                  <div className="absolute top-2 left-2 text-[10px] font-bold opacity-40">GAS_ANALYSIS</div>
                  <div className="mt-6">
                    <div className="flex justify-between items-end mb-1">
                      <span className="text-4xl font-black">{sensors.gasLevel}</span>
                      <span className="text-xs font-bold text-emerald-900">PPM</span>
                    </div>
                    <div className="h-4 w-full border border-emerald-900 bg-black p-1 flex gap-1">
                      {Array.from({ length: 20 }).map((_, i) => (
                        <div
                          key={`gas-${i}`}
                          className={`h-full flex-1 ${
                            i < sensors.gasLevel / 25
                              ? sensors.gasLevel > 400
                                ? 'bg-red-500'
                                : 'bg-emerald-500'
                              : 'bg-emerald-950/20'
                          }`}
                        />
                      ))}
                    </div>
                  </div>
                </div>

                <div className="flex-1 border-2 border-emerald-900/30 p-4 flex flex-col justify-between">
                  <div className="text-[10px] font-bold opacity-40 uppercase">Ultrasonic_Radar</div>
                  <div className="relative h-16 w-full flex items-center justify-center">
                    <Radio className="text-emerald-500 animate-pulse" />
                  </div>
                  <p className="text-center font-black text-xl">{sensors.distance}cm</p>
                </div>
              </div>

              <div className="lg:col-span-6 flex flex-col gap-4">
                <div className="flex-1 border-2 border-emerald-900/30 bg-black/40 p-4 relative">
                  <h3 className="text-xs font-black tracking-widest flex items-center gap-2 mb-4">
                    <Database size={14} /> LIVE_WAVEFORM_RECV
                  </h3>
                  <div className="h-full max-h-[350px] w-full relative flex items-center gap-[2px]">
                    {Array.from({ length: 60 }).map((_, i) => (
                      <div
                        key={`wave-${i}`}
                        className={`flex-1 transition-all duration-300 ${
                          isAlarmActive ? 'bg-red-500/50' : 'bg-emerald-500/30'
                        }`}
                        style={{ height: `${10 + Math.random() * (isAlarmActive ? 90 : 50)}%` }}
                      />
                    ))}
                  </div>
                </div>

                <div className="h-24 grid grid-cols-4 gap-4">
                  {['ALARM', 'HVAC', 'PUMP', 'VENT'].map((item) => (
                    <div
                      key={item}
                      className="border-2 border-emerald-900/30 flex flex-col items-center justify-center p-2 bg-zinc-950/50"
                    >
                      <span className="text-[8px] font-bold text-emerald-900 mb-1">{item}</span>
                      <div
                        className={`w-2 h-2 rounded-full ${
                          isAlarmActive ? 'bg-red-500 shadow-[0_0_8px_red]' : 'bg-emerald-500 shadow-[0_0_8px_emerald]'
                        }`}
                      ></div>
                    </div>
                  ))}
                </div>
              </div>

              <div className="lg:col-span-3 border-2 border-emerald-900/30 bg-black flex flex-col h-full overflow-hidden">
                <div className="bg-emerald-900/10 p-2 border-b border-emerald-900/30 flex items-center gap-2 text-[10px] font-black uppercase">
                  <Terminal size={14} /> KERNEL_LOGS
                </div>
                <div className="flex-1 p-3 overflow-y-auto text-[10px] space-y-1 font-bold">
                  {logs.map((log) => (
                    <div key={log.id} className="flex gap-2">
                      <span className="text-emerald-900 whitespace-nowrap">[{log.time}]</span>
                      <span className={log.type === 'danger' ? 'text-red-500' : 'text-emerald-600'}>{log.msg}</span>
                    </div>
                  ))}
                  <div ref={terminalEndRef} />
                </div>
                <div className="p-2 border-t border-emerald-900/30">
                  <button
                    onClick={() => setIsMuted(!isMuted)}
                    className="w-full text-[8px] p-2 border border-emerald-900 hover:bg-emerald-500 hover:text-black transition-all font-black"
                  >
                    {isMuted ? 'UNMUTE_AUDIO' : 'MUTE_BUZZER'}
                  </button>
                </div>
              </div>
            </main>

            <footer className="fixed bottom-0 left-0 w-full h-1 bg-zinc-900">
              <div
                className="h-full bg-emerald-500 shadow-[0_0_10px_emerald]"
                style={{ width: `${sensors.uptime % 100}%` }}
              ></div>
            </footer>
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
  </body>
</html>
